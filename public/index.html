<!--
    Notes: 
    Was not immedietely obvious that I had to specify img width/height to use image upload
    How do I display collections sorted by a property? Ex: I want to display posts sorted by likes
-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Mavo live test</title>

        <!-- update the version number as needed -->
        <script defer src="/__/firebase/7.24.0/firebase-app.js"></script>
        <!-- include only the Firebase features as you need -->
        <script defer src="/__/firebase/7.24.0/firebase-auth.js"></script>
        <script defer src="/__/firebase/7.24.0/firebase-database.js"></script>
        <script defer src="/__/firebase/7.24.0/firebase-messaging.js"></script>
        <script defer src="/__/firebase/7.24.0/firebase-storage.js"></script>
        <script defer src="/__/firebase/7.24.0/firebase-analytics.js"></script>
        <script defer src="/__/firebase/7.24.0/firebase-remote-config.js"></script>
        <script defer src="/__/firebase/7.24.0/firebase-performance.js"></script>
        <!-- initialize the SDK after all desired features are loaded -->
        <script defer src="/__/firebase/init.js"></script>

        <!--- Mavo.io loading -->
        <script src="https://get.mavo.io/stable/mavo.min.js"></script>
        <link rel="stylesheet" href="https://get.mavo.io/stable/mavo.min.css"	>


	<style>
		img {
			width: 300px;
			height: 300px;
        }
        .post {
            width: 300px;
            border: 1px solid red;
        }
        #allPosts{
            display:grid;
            grid-template-columns: repeat( auto-fit, minmax(300px, 1fr) );
        }
    </style>

    </head>
    <body>
        <main
            mv-app="mavogram"
            mv-autosave="2"
            mv-plugins="firebase-firestore"
            mv-storage="firebase://mavogram"
            mv-firebase-key="AIzaSyAxhufy2Jw1JKpEtWZp2ncK002IhwLyy68"
            mv-firebase="auth storage realtime">

            Upload pictures!
            <div id="allPosts">
                <div class="post" property="post" mv-multiple mv-order="desc">
                    <p property="name" mv-default="[readable(to(filename(image), '.'))]"></p>
                    <a property="picture" mv-attribute="none">
                        <img property="image" />
                    </a>
                    <button
                        class="mv-logged-in"
                        property="likes"
                        mv-action="set(likes, likes+1)">
                        [likes] ❤️ 
                    </button>
                    <div>
                        Comments:
                        <div property="comment" mv-multiple>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </body>
</html>
